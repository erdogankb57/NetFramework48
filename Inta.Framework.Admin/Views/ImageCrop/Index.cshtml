
@{
    ViewBag.Title = "Index";
}
<link href="@Url.Content("~/Content/css/image-crop.css")" rel="stylesheet" />

<div class="form-content">
    <div class="popupMessage"></div>

    <form id="saveForm" method="post" novalidate>

        <div class="form-group">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group" id="jcrop">
                        <img id="imagePreview" src="@(ViewBag.Image)" alt="Lütfen bir resim seçiniz." />
                    </div>
                </div>
            </div>
        </div>



        <div class="modal-footer">
            <button type="submit" id="btnsubmit" class="btn btn-standart">Kaydet</button>
        </div>
    </form>
</div>


@section scripts{

}

<script src="@Url.Content("~/Content/js/jquery.Jcrop.min.js")"></script>



<script>

    var CropCoordinat;

    var ResizeImage = function (width, height) {
        var boxWidth = width;
        var boxHeight = height;


        const img = new Image();
        img.onload = function () {
            trueWidth = this.width;
            trueHeight = this.height;

            var imageWidth = trueWidth;
            var imageHeight = trueHeight;

            $("#imagePreview img").attr("width", this.width);
            $("#imagePreview img").attr("height", this.height);



            var oranDurumu = true;
            var x = imageWidth / 2 - boxWidth / 2;
            var y = imageHeight / 2 - boxHeight / 2;
            var x1 = x + boxWidth;
            var y1 = y + boxHeight;


            $("#imagePreview").Jcrop({
                aspectRatio: oranDurumu ? boxWidth / boxHeight : false,
                setSelect: [x, y, x1, y1],
                allowSelect: false,
                allowMove: true,
                allowResize: true,
                fixedSupport: false,
                //boxWidth: boxWidth,
                //boxHeight: boxHeight,
                boxWidth: imageWidth,
                boxHeight: imageHeight,
                trueSize: [trueWidth, trueHeight],
                onSelect: function (c) {
                    CropCoordinat = c;
                }
            });
        }
        img.src = $("#imagePreview").attr("src");

    }

    $(function () {
        ResizeImage(@ViewBag.Width,@ViewBag.Height);
    });
</script>